@import '~@nti/style-common';

//TODO: figure out how not to have this be specific to the catalog...
$CUSTOM_RANGES: (
	mobile: (null, 736px),
	portraitTablet: (737px, 1023px)
);

@mixin card-layout {
	background: white;
	box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
	position: relative;
	height: 290px;
	width: 242px;
	padding: 5px;
	cursor: pointer;

	.nti-course-card-image {
		width: 100%;
		height: 170px;
	}

	.progress {
		position: absolute;
		bottom: 0;
		left: 0;
		background: #3fb34f;
		height: 0.5rem;
	}

	.badges {
		list-style: none;
		padding: 5px;
		margin: 0;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		display: flex;
		flex-direction: row;
		align-items: center;

		li {
			flex: 0 0 auto;
		}
	}

	.meta {
		padding: 0 5px;

		.nti-course-card-authors {
			margin-top: 10px;
		}
	}

	.no-touch &:hover {
		.nti-course-card-image img {
			opacity: 0.7;
			transform: scale(1.05, 1.05);
		}

		.nti-course-card-badge.settings {
			opacity: 1;
		}
	}

	@include respond-to(handhelds) {
		height: 250px;
		width: 185px;
		padding: 0;

		.meta {
			padding: 0 15px;

			.nti-course-card-authors {
				margin-top: 5px;
			}
		}

		.nti-course-card-badge.settings {
			display: none;
		}

		.badges {
			height: 44px;
		}

		.nti-course-card-image {
			height: 150px;
		}
	}
}

@mixin list-layout {
	display: flex;
	flex-direction: row;
	align-items: center;
	overflow: hidden;

	.badges {
		display: none;
	}

	.nti-course-card-image {
		width: 100px;
		height: 61px;
		flex: 0 0 auto;

		img {
			width: 100%;
			height: auto;
		}
	}

	.meta {
		flex: 1 1 auto;
		padding: 0 10px;
		overflow: hidden;

		.nti-course-card-title {
			.provider-unique-id {
				line-height: 1.5;
			}

			.title {
				display: block;
				font-weight: 400;
				margin-bottom: 0.5rem;
				white-space: nowrap;
			}
		}

		.nti-course-card-authors {
			margin-top: 0;
			display: block;
			white-space: nowrap;
		}
	}
}

.nti-course-card-container {
	&.card {
		@include card-layout;
	}

	&.list {
		@include list-layout;
	}

	&.collapse-to-list {
		@include card-layout;

		@include responsive-range(mobile, $CUSTOM_RANGES) {
			@include list-layout;

			//override card styles
			width: initial;
			height: initial;
			box-shadow: none;
			background: none;
		}
	}
}
